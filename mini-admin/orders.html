<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orders Management - SuperMaroc</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="orders.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="fas fa-shopping-cart"></i> SuperMaroc - Orders Management
            </a>
            <div class="d-flex align-items-center">
                <span class="text-light me-3">
                    <i class="fas fa-map-marker-alt"></i> <strong id="currentStore">Agadir Store</strong>
                </span>
                <button class="btn btn-yellow me-3" id="createOrderBtn">
                    <i class="fas fa-plus"></i> New Order
                </button>
                <div class="dropdown">
                    <button class="btn btn-yellow dropdown-toggle" type="button" data-bs-toggle="dropdown">
                        <i class="fas fa-cog"></i> Actions
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#" id="exportOrdersBtn"><i class="fas fa-file-export"></i> Export Orders</a></li>
                        <li><a class="dropdown-item" href="#" id="importOrdersBtn"><i class="fas fa-file-import"></i> Import Orders</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#" id="bulkProcessBtn"><i class="fas fa-play-circle"></i> Process Selected</a></li>
                        <li><a class="dropdown-item" href="#" id="bulkPrintBtn"><i class="fas fa-print"></i> Print Invoices</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-2 p-0 sidebar">
                <div class="pt-3">
                    <a href="index.html">
                        <i class="fas fa-tachometer-alt"></i> Dashboard
                    </a>
                    <a href="products.html">
                        <i class="fas fa-boxes"></i> Products
                    </a>
                    <a href="sales.html">
                        <i class="fas fa-chart-line"></i> Sales
                    </a>
                    <a href="alerts.html">
                        <i class="fas fa-exclamation-triangle"></i> Alerts
                    </a>
                    <a href="#" class="active">
                        <i class="fas fa-shopping-cart"></i> Orders
                    </a>
                    <a href="suppliers.html">
                        <i class="fas fa-truck"></i> Suppliers
                    </a>
                    <a href="inventory.html">
                        <i class="fas fa-clipboard-check"></i> Inventory
                    </a>
                    <hr class="my-3">
                    
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-md-10 p-4">
                <!-- Stats Cards -->
                <div class="row mb-4">
                    <div class="col-md-3 col-sm-6">
                        <div class="card stat-card">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div>
                                        <h6 class="card-title">ORDERS TODAY</h6>
                                        <h2 class="card-value" id="ordersToday">15</h2>
                                        <p class="card-detail" id="ordersTodayAmount">8,450 MAD</p>
                                        <p class="card-change positive">
                                            <i class="fas fa-arrow-up"></i> 12% from yesterday
                                        </p>
                                    </div>
                                    <i class="fas fa-shopping-cart fa-2x text-yellow"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-sm-6">
                        <div class="card stat-card">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div>
                                        <h6 class="card-title">PENDING FULFILLMENT</h6>
                                        <h2 class="card-value" id="pendingOrders">8</h2>
                                        <p class="card-detail" id="avgProcessTime">45 min avg</p>
                                        <p class="card-change negative">
                                            <i class="fas fa-exclamation-triangle"></i> 2 delayed orders
                                        </p>
                                    </div>
                                    <i class="fas fa-clock fa-2x text-warning"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-sm-6">
                        <div class="card stat-card">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div>
                                        <h6 class="card-title">REVENUE THIS WEEK</h6>
                                        <h2 class="card-value" id="weeklyRevenue">58,900</h2>
                                        <p class="card-detail">MAD</p>
                                        <p class="card-change positive">
                                            <i class="fas fa-arrow-up"></i> 18% from last week
                                        </p>
                                    </div>
                                    <i class="fas fa-chart-line fa-2x text-success"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-sm-6">
                        <div class="card stat-card">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div>
                                        <h6 class="card-title">AVG. ORDER VALUE</h6>
                                        <h2 class="card-value" id="avgOrderValue">563</h2>
                                        <p class="card-detail">MAD per order</p>
                                        <p class="card-change negative">
                                            <i class="fas fa-arrow-down"></i> 5% from yesterday
                                        </p>
                                    </div>
                                    <i class="fas fa-money-bill-wave fa-2x text-info"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions & Status -->
                <div class="row mb-4">
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-header card-header-yellow">
                                <h5 class="mb-0"><i class="fas fa-list-alt"></i> Order Status Overview</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-3 col-6 mb-3">
                                        <div class="status-box new">
                                            <div class="status-count" id="statusNew">5</div>
                                            <div class="status-label">New</div>
                                            <i class="fas fa-plus-circle"></i>
                                        </div>
                                    </div>
                                    <div class="col-md-3 col-6 mb-3">
                                        <div class="status-box processing">
                                            <div class="status-count" id="statusProcessing">8</div>
                                            <div class="status-label">Processing</div>
                                            <i class="fas fa-cogs"></i>
                                        </div>
                                    </div>
                                    <div class="col-md-3 col-6 mb-3">
                                        <div class="status-box ready">
                                            <div class="status-count" id="statusReady">3</div>
                                            <div class="status-label">Ready</div>
                                            <i class="fas fa-check-circle"></i>
                                        </div>
                                    </div>
                                    <div class="col-md-3 col-6 mb-3">
                                        <div class="status-box delivered">
                                            <div class="status-count" id="statusDelivered">12</div>
                                            <div class="status-label">Delivered</div>
                                            <i class="fas fa-home"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header card-header-yellow">
                                <h5 class="mb-0"><i class="fas fa-bolt"></i> Quick Actions</h5>
                            </div>
                            <div class="card-body">
                                <div class="d-grid gap-2">
                                    <button class="btn btn-yellow" id="processNextBtn">
                                        <i class="fas fa-forward"></i> Process Next Order
                                    </button>
                                    <button class="btn btn-yellow" id="scanBarcodeBtn">
                                        <i class="fas fa-barcode"></i> Scan Barcode
                                    </button>
                                    <button class="btn btn-yellow" id="printQueueBtn">
                                        <i class="fas fa-print"></i> Print Queue
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Orders Table -->
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header card-header-yellow d-flex justify-content-between align-items-center">
                                <h5 class="mb-0"><i class="fas fa-table"></i> Recent Orders</h5>
                                <div class="btn-group">
                                    <button class="btn btn-yellow btn-sm" id="refreshOrdersBtn">
                                        <i class="fas fa-sync-alt"></i> Refresh
                                    </button>
                                    <button class="btn btn-yellow btn-sm" id="filterOrdersBtn">
                                        <i class="fas fa-filter"></i> Filter
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <!-- Filter Bar -->
                                <div class="row mb-3">
                                    <div class="col-md-3">
                                        <input type="text" class="form-control" id="orderSearch" placeholder="Search orders...">
                                    </div>
                                    <div class="col-md-3">
                                        <select class="form-select" id="statusFilter">
                                            <option value="">All Status</option>
                                            <option value="new">New</option>
                                            <option value="confirmed">Confirmed</option>
                                            <option value="processing">Processing</option>
                                            <option value="ready">Ready</option>
                                            <option value="shipped">Shipped</option>
                                            <option value="delivered">Delivered</option>
                                            <option value="cancelled">Cancelled</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <select class="form-select" id="typeFilter">
                                            <option value="">All Types</option>
                                            <option value="online">Online</option>
                                            <option value="instore">In-Store</option>
                                            <option value="phone">Phone</option>
                                            <option value="recurring">Recurring</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <input type="date" class="form-control" id="dateFilter">
                                    </div>
                                </div>
                                
                                <!-- Orders Table -->
                                <div class="table-responsive">
                                    <table class="table table-hover" id="ordersTable">
                                        <thead class="table-light">
                                            <tr>
                                                <th width="50">
                                                    <input type="checkbox" id="selectAllOrders">
                                                </th>
                                                <th width="100">Order ID</th>
                                                <th>Customer</th>
                                                <th width="120">Type</th>
                                                <th width="120">Amount</th>
                                                <th width="120">Status</th>
                                                <th width="150">Created</th>
                                                <th width="150">Delivery</th>
                                                <th width="150">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="ordersTableBody">
                                            <!-- Orders will be loaded here -->
                                        </tbody>
                                    </table>
                                </div>
                                
                                <!-- Table Footer -->
                                <div class="d-flex justify-content-between align-items-center mt-3">
                                    <div>
                                        <span class="text-muted" id="orderCountText">Showing 0 orders</span>
                                    </div>
                                    <nav>
                                        <ul class="pagination mb-0">
                                            <li class="page-item"><a class="page-link" href="#">Previous</a></li>
                                            <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                                            <li class="page-item"><a class="page-link" href="#">Next</a></li>
                                        </ul>
                                    </nav>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Today's Activity -->
                <div class="row mt-4">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header card-header-yellow">
                                <h5 class="mb-0"><i class="fas fa-history"></i> Today's Activity</h5>
                            </div>
                            <div class="card-body">
                                <div class="timeline" id="orderTimeline">
                                    <!-- Timeline items will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Order Modal -->
    <div class="modal fade" id="createOrderModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header modal-header-yellow">
                    <h5 class="modal-title"><i class="fas fa-plus-circle"></i> Create New Order</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="orderForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card mb-3">
                                    <div class="card-header">
                                        <h6 class="mb-0"><i class="fas fa-user"></i> Customer Information</h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-6 mb-3">
                                                <label class="form-label">Customer Name *</label>
                                                <input type="text" class="form-control" id="customerName" required>
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <label class="form-label">Phone Number</label>
                                                <input type="tel" class="form-control" id="customerPhone">
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Email Address</label>
                                            <input type="email" class="form-control" id="customerEmail">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Delivery Address</label>
                                            <textarea class="form-control" id="deliveryAddress" rows="2"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card mb-3">
                                    <div class="card-header">
                                        <h6 class="mb-0"><i class="fas fa-info-circle"></i> Order Details</h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-6 mb-3">
                                                <label class="form-label">Order Type *</label>
                                                <select class="form-select" id="orderType" required>
                                                    <option value="">Select type...</option>
                                                    <option value="online">Online</option>
                                                    <option value="instore">In-Store</option>
                                                    <option value="phone">Phone</option>
                                                    <option value="delivery">Delivery</option>
                                                    <option value="pickup">Pickup</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <label class="form-label">Payment Method *</label>
                                                <select class="form-select" id="paymentMethod" required>
                                                    <option value="">Select method...</option>
                                                    <option value="cash">Cash</option>
                                                    <option value="card">Card</option>
                                                    <option value="check">Check</option>
                                                    <option value="mobile">Mobile Payment</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6 mb-3">
                                                <label class="form-label">Delivery Date</label>
                                                <input type="date" class="form-control" id="deliveryDate">
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <label class="form-label">Delivery Time</label>
                                                <select class="form-select" id="deliveryTime">
                                                    <option value="">Any time</option>
                                                    <option value="morning">Morning (9AM-12PM)</option>
                                                    <option value="afternoon">Afternoon (1PM-5PM)</option>
                                                    <option value="evening">Evening (6PM-9PM)</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Special Instructions</label>
                                            <textarea class="form-control" id="specialInstructions" rows="2"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Products Selection -->
                        <div class="card mb-3">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h6 class="mb-0"><i class="fas fa-boxes"></i> Products</h6>
                                <button type="button" class="btn btn-yellow btn-sm" id="addProductBtn">
                                    <i class="fas fa-plus"></i> Add Product
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table" id="orderProductsTable">
                                        <thead>
                                            <tr>
                                                <th>Product</th>
                                                <th width="100">Quantity</th>
                                                <th width="120">Price</th>
                                                <th width="120">Total</th>
                                                <th width="50">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="orderProductsBody">
                                            <!-- Products will be added here -->
                                        </tbody>
                                    </table>
                                </div>
                                
                                <!-- Summary -->
                                <div class="row mt-3">
                                    <div class="col-md-6">
                                        <div class="input-group mb-3">
                                            <input type="text" class="form-control" placeholder="Discount code">
                                            <button class="btn btn-yellow" type="button">Apply</button>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="order-summary">
                                            <div class="summary-row">
                                                <span>Subtotal:</span>
                                                <span id="subtotal">0.00 MAD</span>
                                            </div>
                                            <div class="summary-row">
                                                <span>Discount:</span>
                                                <span id="discount">0.00 MAD</span>
                                            </div>
                                            <div class="summary-row">
                                                <span>Tax:</span>
                                                <span id="tax">0.00 MAD</span>
                                            </div>
                                            <div class="summary-row total">
                                                <span><strong>Total:</strong></span>
                                                <span id="totalAmount"><strong>0.00 MAD</strong></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-yellow" id="saveOrderBtn">
                        <i class="fas fa-save"></i> Create Order
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Order Details Modal -->
    <div class="modal fade" id="orderDetailsModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header modal-header-yellow">
                    <h5 class="modal-title"><i class="fas fa-info-circle"></i> Order Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="orderDetailsContent">
                        <!-- Order details will be loaded here -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-yellow" id="printInvoiceBtn">
                        <i class="fas fa-print"></i> Print Invoice
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Product Modal -->
    <div class="modal fade" id="addProductModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header modal-header-yellow">
                    <h5 class="modal-title"><i class="fas fa-plus"></i> Add Product to Order</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <input type="text" class="form-control" id="productSearchInput" placeholder="Search products by name or barcode...">
                    </div>
                    <div class="table-responsive">
                        <table class="table table-hover" id="productsSelectionTable">
                            <thead>
                                <tr>
                                    <th>Product</th>
                                    <th>Category</th>
                                    <th>Price</th>
                                    <th>Stock</th>
                                    <th>Quantity</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="productsSelectionBody">
                                <!-- Products will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <!-- Custom JavaScript -->
    <script src="orders.js"></script>
</body>
</html>